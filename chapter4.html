<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 4: The First Race</title>
    <link rel="stylesheet" href="styles.css"> <!-- Link to global stylesheet -->
    <style>
        #cipherWheel {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            max-width: 300px;
            margin: auto;
            padding: 10px;
            border: 2px solid #333;
            border-radius: 10px;
            background: #eee;
        }

        .wheel-letter {
            padding: 5px 10px;
            font-size: 20px;
            font-weight: bold;
            color: black;
            background: white;
            border-radius: 5px;
            transition: transform 0.2s ease-in-out;
        }

        .wheel-letter.selected {
            color: white;
            background: blue;
            transform: scale(1.2);
        }

        button {
            padding: 10px;
            margin: 10px;
            font-size: 16px;
            cursor: pointer;
        }

        input {
            padding: 10px;
            margin: 10px;
            font-size: 16px;
        }

        #hint {
            display: none;
            margin-top: 10px;
        }

        #successMessage {
            display: none;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div>
    <h1>Chapter 4: The First Race</h1>

    <h3>The Journey Begins</h3>
    <p>Lincoln adjusted his backpack as he stepped off the train, the cold mountain air biting at his skin. The monastery was nestled deep in the Swiss Alps, a centuries-old haven for monks and scholars alike. It had taken him three days to track down this particular location—one of the few places rumored to house a rare manuscript linked to biblical encryption.</p>

    <p>He pulled out his phone, checking the notes he had taken from his research. The cipher in Chapter 3 had pointed him to a specific passage in an ancient text, one that was kept here under careful watch. If he was right, the manuscript could contain a key to deciphering the hidden code embedded in scripture.</p>

    <p>As he climbed the stone steps toward the main entrance, a nagging thought lingered in his mind. Dr. Chroix had seemed overly interested in his discovery. And if Chroix was interested, Lincoln knew he wouldn’t be the only one looking for it.</p>

    <h3>An Unexpected Rival</h3>
    <p>Inside the monastery’s library, a hush filled the massive stone-walled chamber. Wooden shelves towered over him, packed with ancient texts bound in worn leather. He approached the librarian, a wiry man in his sixties with sharp, knowing eyes.</p>

    <p>“I called ahead,” Lincoln said. “I’m here to review the Codex Antiochus.”</p>

    <p>The librarian studied him for a moment before nodding. “Follow me.”</p>

    <p>They weaved through the maze of shelves until they reached a small study room. A thick manuscript rested on a velvet cloth, its pages yellowed with age. Lincoln’s pulse quickened as he reached for it—</p>

    <p>“Ah. So I was right.”</p>

    <p>Lincoln froze at the voice behind him. Turning, he found himself face-to-face with Nathaniel Dorne, a well-dressed academic Lincoln had encountered before in cryptography circles. Dorne had a reputation—brilliant, relentless, and suspiciously well-funded.</p>

    <p>“Didn’t expect to see you here, Whitrush,” Dorne continued, stepping into the room with a smirk. “But I should have known. You’ve been stirring up quite the conversation online.”</p>

    <p>Lincoln’s jaw tightened. He had no doubt that Dorne was working with—or at least for—Chroix.</p>

    <p>“This manuscript isn’t yours,” Lincoln said.</p>

    <p>Dorne chuckled. “And it’s not yours, either. But the real question is—who’s going to decipher it first?”</p>

    <h3>The Manuscript Puzzle</h3>
    <p>Ignoring Dorne, Lincoln flipped open the manuscript, scanning the text. He already knew what he was looking for—a particular passage with odd letter spacings. As he ran his fingers over the inked letters, he noticed something.</p>

    <p>The letters formed a pattern, shifting unpredictably. Not a simple shift like a Caesar cipher, but something more complex—a **Vigenère Cipher**.</p>

    <p>Dorne leaned against the doorway, arms crossed. “You look stuck. Need a hint?”</p>

    <p>Lincoln didn’t respond. Instead, he pulled out his notepad and began working through the encryption. The **Vigenère Cipher** required a key—a word or phrase that determined the shifts in the letters. **If he could find the key hidden in the manuscript’s margins, he’d be able to decrypt the next clue.**</p>

    <p>Dorne tapped his watch. “Tick tock, Lincoln. First one to crack the code wins.”</p>

    <p>Lincoln exhaled slowly, his mind racing. This wasn’t just about solving the puzzle anymore—this was a race. And he wasn’t going to lose.</p>

    <h3>The Ciphertext Message</h3>
    <p>The ciphertext message was: <strong>Olmvzcbzolmxvtqdcmlozrqykpitiwqrcx</strong></p>

    <p>The key: <strong>veilveilveilveilveilveilveilveilve</strong></p>

    <h3>Decode the Message</h3>
    <p>Type in the plaintext message below to decode the hidden message:</p>

    <input type="text" id="userInput" placeholder="Enter your decoded message">
    <button onclick="validateAnswer()">Submit</button>

    <div id="hint">
        <p>Hint: The key is a repeated phrase, and the message is hidden using the Vigenère Cipher.</p>
    </div>

    <div id="successMessage">
        <p>Congratulations! You've decoded the message correctly. <a href="chapter5.html">Proceed to Chapter 5</a></p>
    </div>
</div>

<script>
    const correctAnswer = "thekeytothemapishiddeninplainsight"; // The correct plaintext message
    const userInputField = document.getElementById("userInput");
    const successMessage = document.getElementById("successMessage");

    // Function to validate the user's input
    function validateAnswer() {
        const userAnswer = userInputField.value.trim().toLowerCase();

        if (userAnswer === correctAnswer) {
            successMessage.style.display = "block"; // Show success message
        } else {
            alert("Incorrect, try again.");
        }
    }
</script>

</body>
</html>